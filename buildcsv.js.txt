import converter from 'json-2-csv';
import * as fs from 'fs';

const fileName = 'gamelog.csv';

const main = async () => {

    const rawJson = fs.readFileSync('gamelog.json');
    const gamelog = JSON.parse(rawJson);

    converter.json2csv(gamelog, (err, csv) => {
        if (err) {
            throw err;
        }
    
        const writeStream = fs.createWriteStream(fileName);
 
        writeStream.write(csv);
    
        writeStream.on('finish', () => {
            console.log('done');
        });
    
        writeStream.on('error', (err) => {
            console.error(err);
        });
    
        writeStream.end();
    });

}

main();